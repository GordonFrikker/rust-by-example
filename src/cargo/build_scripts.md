# Скрипты сборки

Иногда обычной сборки, предоставляемой cargo, недостаточно. Возможно вашему крейту нужны некоторые предварительные условия, прежде чем он успешно скомпилируется, например кодогенерация или предварительно должен скомпилироваться какой-то нативный код. Для решения этой проблемы, мы имеем скрипты сборки, которые cargo может запустить.

Для добавления скрипта сборки в ваш пакет, вы можете указать его в `Cargo.toml` следующим образом:

```toml
[package]
...
build = "build.rs"
```

Иначе по умолчанию cargo будет искать файл `build.rs` в директории проекта.

## Как использовать скрипт сборки

Скрипт сборки - это просто другой файл на Rust, который будет скомпилирован и вызван до компиляции чего-либо другого в пакете. Следовательно он может быть использовать для выполнения предварительных условий вашего крейта.

Через переменные окружения cargo предоставляет скрипту входные параметры [описанные здесь](https://doc.rust-lang.org/cargo/reference/environment-variables.html#environment-variables-cargo-sets-for-build-scripts), которые могут быть использованы.

Скрипт возвращает значения через stdout. Все напечатанные строки записываются в 
`target/debug/build/<pkg>/output`. Кроме того, строки с префиксом `cargo:` напрямую интерпретируются cargo и следовательно могут быть использованы для объявления параметров для компиляции пакета.

Больше информации и примеров можно найти в [спецификации cargo](https://doc.rust-lang.org/cargo/reference/build-scripts.html).
